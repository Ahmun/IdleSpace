<h1>
  <clr-icon shape="flask" size="48" class="resIcon"></clr-icon>
  Shipyard
</h1>

<div class="clr-row">
  <div class="clr-col-12	clr-col-sm-12	clr-col-md-12	clr-col-lg-6 clr-col-xl-6">
    <p>
      Naval Capacity:
      <app-formatted-quantity
        [quantity]="ms.game.fleetManager.totalWantedNavalCap"
        [integer]="true"
        [class.notEnough]="!ms.game.fleetManager.configurationValid"
      >
      </app-formatted-quantity>
      /
      <app-formatted-quantity
        [quantity]="ms.game.fleetManager.totalNavalCapacity"
        [integer]="true"
      >
      </app-formatted-quantity>
    </p>

    <!-- <clr-alert
      *ngIf="!ms.game.fleetManager.configurationValid; else buy"
      [clrAlertClosable]="false"
      clrAlertType="warning"
    >
      <clr-alert-item>
        <span class="alert-text">
          Not enough naval capacity.
        </span>
      </clr-alert-item>
    </clr-alert> -->

    <div class="btn-group btn-primary">
      <button
        class="btn"
        [disabled]="!ms.game.fleetManager.configurationValid"
        (click)="save()"
      >
        <clr-icon shape="floppy"></clr-icon>
        Save
      </button>
      <button
        class="btn btn-success"
        [disabled]="!ms.game.fleetManager.configurationValid"
        (click)="make()"
      >
        <clr-icon shape="cog"></clr-icon>
        Reinforce fleet
      </button>
    </div>

    <div *ngFor="let ds of ms.game.fleetManager.ships; trackBy: designId">
      <h4>
        <clr-icon shape="angle-double" *ngIf="ds.isUpgrading"></clr-icon>
        <clr-icon shape="cog" *ngIf="ds.isBuilding"></clr-icon>

        <clr-icon [attr.shape]="ds.type.shape"></clr-icon>

        {{ ds.name }}

        <app-formatted-quantity
          [quantity]="ds.wantQuantityTemp"
          [integer]="true"
        ></app-formatted-quantity>
      </h4>
      <!-- <ng5-slider
        [(value)]="ds.wantQuantityTemp"
        [options]="ds.sliderOptions"
        (valueChange)="onSliderChange()"
      ></ng5-slider> -->
      <input
        type="range"
        [name]="'sl' + ds.id"
        [min]="ds.sliderOptions.floor"
        [max]="ds.sliderOptions.ceil"
        [step]="ds.sliderOptions.step"
        [(ngModel)]="ds.wantQuantityTemp"
        (change)="onSliderChange()"
      />
    </div>
  </div>
  <div class="clr-col-12	clr-col-sm-12	clr-col-md-12	clr-col-lg-6 clr-col-xl-6">
    <h4>Jobs:</h4>
    <div cdkDropList (cdkDropListDropped)="drop($event)" class="myBg drag-list">
      <app-job
        cdkDrag
        *ngFor="let job of ms.game.shipyard.jobs; trackBy: getJobId"
        [job]="job"
      ></app-job>
    </div>
  </div>
</div>
